datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum Role {
  client
  businessOwner
  admin
}

enum BusinessType {
  beauty
  clothing
  media
  arts
}

//user model

model User {
  //unique id for every user
  id        String  @id @default(uuid())
  firstname String
  lastName  String
  email     String  @unique
  password  String?
  role      Role    @default(client)

  //One-to-one rltnshp for BusinessOwners and Business
  business Business?

  //Goole oauth login (if we want to use it)
  googleId String? @unique

  //Managed timestamps
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Business {
  //Unique id for each business
  id   String       @id @default(uuid())
  name String
  type BusinessType

  //Foreign key. Linking business to owner
  ownerId String @unique

  //If owner deltd, business dltd too
  owner User @relation(fields: [ownerId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([type])
}
